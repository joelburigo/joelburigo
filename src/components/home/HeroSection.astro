---
import Container from '../ui/Container.astro'
import VideoPlayer from '../ui/VideoPlayer.astro'
import joelBurigoHero from '../../assets/images/joel-burigo-vendas-sem-segredos-2-800w.webp'
import Icons from '../ui/Icons.astro'

---

<section class="hero-section relative flex min-h-screen items-center overflow-hidden bg-dark">
  <Container class="relative z-10 pb-16 pt-16 md:pb-24 md:pt-24">
    <div class="grid grid-cols-1 items-center gap-12 lg:grid-cols-2">
      <!-- Left Content -->
      <div class="hero-content space-y-8 text-white">
        <div class="mb-2 inline-block rounded-full border border-lime/30 bg-lime/10 px-4 py-1.5 text-sm font-display font-bold text-lime backdrop-blur-sm">
          17+ anos estruturando vendas
        </div>

        <h1 class="font-display text-display-md text-white lg:text-display-lg">
          Suas Vendas Est√£o <span class="text-lime">Quebradas?</span> Vou Te Mostrar{' '}
          <span class="text-lime">
            Como Arrumar
          </span>
        </h1>

        <p class="max-w-xl font-sans text-body-lg text-gray-200">
          E a√≠, sou Joel Burigo. Quebrei aos 25, morei num barraco, reconstru√≠ batendo 100+ portas. 17+ anos depois: ~R$ 1 bilh√£o estruturado em vendas. Criei os 6Ps pra voc√™ parar de improvisar e come√ßar a <strong class="text-white">escalar de verdade</strong>.
        </p>

        <div class="flex flex-col gap-4 pt-6 sm:flex-row sm:gap-4">
          <a href="/vendas-sem-segredos" data-astro-prefetch rel="preload" class="w-full sm:w-auto">
            <button class="group inline-flex h-16 w-full items-center justify-center gap-3 rounded-xl bg-lime px-10 font-display text-lg font-bold shadow-2xl shadow-lime/30 transition-all hover:scale-[1.02] hover:bg-lime/90 hover:shadow-lime/40 focus:outline-none focus:ring-2 focus:ring-lime focus:ring-offset-2 focus:ring-offset-dark sm:w-auto" style="color: #020617;">
              <span>Bora Estruturar? üöÄ</span>
              <Icons name="arrow-right" class="h-5 w-5 transition-transform group-hover:translate-x-1" />
            </button>
          </a>
          <a href="/diagnostico" class="w-full sm:w-auto">
            <button class="group inline-flex h-16 w-full items-center justify-center gap-3 rounded-xl border-2 border-white/90 bg-white/5 px-10 font-display text-lg font-semibold text-white backdrop-blur-sm transition-all hover:scale-[1.02] hover:border-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-dark sm:w-auto">
              <Icons name="clipboard-list" class="h-5 w-5" />
              <span>Diagn√≥stico Gratuito</span>
            </button>
          </a>
          <button id="mobile-video-btn" class="group inline-flex h-16 w-full items-center justify-center gap-3 rounded-xl border-2 border-white/50 bg-white/5 px-8 font-display text-base font-semibold text-white backdrop-blur-sm transition-all hover:scale-[1.02] hover:border-white/70 hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-dark lg:hidden">
            <Icons name="play" class="h-5 w-5 fill-current transition-transform group-hover:scale-110" />
            <span>Assistir V√≠deo</span>
          </button>
        </div>

        <div class="grid grid-cols-3 gap-4 pt-10 font-sans text-body-sm text-gray-200">
          <div class="flex flex-col items-start">
            <div class="flex items-center gap-2 mb-1">
              <div class="h-2 w-2 rounded-full bg-lime"></div>
              <span class="font-display text-h4 text-lime">~R$1bi</span>
            </div>
            <span class="text-xs text-gray-400">Estruturado</span>
          </div>
          <div class="flex flex-col items-start">
            <div class="flex items-center gap-2 mb-1">
              <div class="h-2 w-2 rounded-full bg-lime" style="animation-delay: 0.2s;"></div>
              <span class="font-display text-h4 text-lime">140+</span>
            </div>
            <span class="text-xs text-gray-400">Clientes</span>
          </div>
          <div class="flex flex-col items-start">
            <div class="flex items-center gap-2 mb-1">
              <div class="h-2 w-2 rounded-full bg-lime" style="animation-delay: 0.4s;"></div>
              <span class="font-display text-h4 text-lime">17+</span>
            </div>
            <span class="text-xs text-gray-400">Anos</span>
          </div>
        </div>
      </div>

      <!-- Right Image com V√≠deo -->
      <div class="hero-image relative hidden lg:block">
        <div class="relative">
          <VideoPlayer
            videoUrl="https://www.youtube.com/shorts/nuZUgV1sk64"
            thumbnail={joelBurigoHero}
            title="Conhe√ßa Joel Burigo e o Framework dos 6Ps"
            lazyLoad={false}
            aspectRatio="portrait"
            class="border-4 border-lime/20 shadow-2xl"
          />
          
          <!-- Floating Badge -->
          <div class="hero-badge absolute bottom-6 left-6 z-20 max-w-xs rounded-xl border border-lime/20 bg-dark/95 p-4 shadow-lg backdrop-blur-md">
            <p class="font-display text-h4 text-lime">~R$ 1 Bilh√£o</p>
            <p class="font-sans text-body-sm text-gray-200">Estruturado em vendas ao longo de 17+ anos</p>
          </div>
        </div>
      </div>

      <!-- Mobile Video (hidden, shown when button clicked) -->
      <div id="mobile-video-container" class="mt-8 hidden lg:hidden">
        <VideoPlayer
          videoUrl="https://www.youtube.com/shorts/nuZUgV1sk64"
          thumbnail={joelBurigoHero}
          title="Conhe√ßa Joel Burigo e o Framework dos 6Ps"
          aspectRatio="portrait"
          class="border-4 border-lime/20 shadow-2xl"
        />
      </div>
    </div>
  </Container>

  <!-- Scroll Indicator -->
  <div class="scroll-indicator absolute inset-x-0 bottom-8 flex flex-col items-center text-gray-400">
    <span class="mb-2 text-xs font-medium uppercase tracking-widest">Scroll para saber mais</span>
    <Icons name="chevron-down" class="h-6 w-6 animate-bounce text-lime" />
  </div>
</section>

<script>
  function initMobileVideo() {
    const mobileVideoBtn = document.getElementById('mobile-video-btn');
    const mobileVideoContainer = document.getElementById('mobile-video-container');

    if (mobileVideoBtn && mobileVideoContainer) {
      mobileVideoBtn.addEventListener('click', () => {
        // Use requestAnimationFrame to avoid forced reflow
        requestAnimationFrame(() => {
          mobileVideoContainer.classList.remove('hidden');
          // Delay scrollIntoView to next frame to avoid forced reflow
          requestAnimationFrame(() => {
            mobileVideoContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
          });
        });
      });
    }
  }

  initMobileVideo();
  document.addEventListener('astro:page-load', initMobileVideo);
</script>

<style>
  .hero-content {
    animation: fadeInLeft 0.8s ease-out forwards;
    opacity: 0;
  }

  .hero-image {
    animation: fadeInScale 0.8s ease-out 0.2s forwards;
    opacity: 0;
  }

  .hero-badge {
    animation: fadeInUp 0.6s ease-out 0.8s forwards;
    opacity: 0;
  }

  .scroll-indicator {
    animation: fadeIn 1s ease-out 1.5s forwards;
    opacity: 0;
  }

  @keyframes fadeInLeft {
    from {
      opacity: 0;
      transform: translateX(-50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes fadeInScale {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
</style>
