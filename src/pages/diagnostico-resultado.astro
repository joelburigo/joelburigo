---
import Layout from '../layouts/Layout.astro';
import Header from '../components/layout/Header.astro';
import Footer from '../components/layout/Footer.astro';
import { AlertTriangle, CheckCircle2, ArrowRight, Target } from 'lucide-react';

const seo = {
  title: 'Resultado do Diagn√≥stico 6Ps | Joel Burigo',
  description: 'Veja o resultado detalhado do seu diagn√≥stico de vendas baseado no framework dos 6Ps.',
  keywords: 'diagn√≥stico vendas, resultado 6Ps, an√°lise vendas',
};
---

<Layout title={seo.title} description={seo.description} keywords={seo.keywords}>
  <Header />
  
  <div class="min-h-screen bg-dark pb-20 pt-32">
    <div class="container mx-auto max-w-6xl px-4">
      <!-- Header do Resultado -->
      <div class="mb-12 text-center">
        <div class="mb-4 inline-flex items-center gap-2 rounded-full bg-lime/10 px-4 py-2">
          <CheckCircle2 className="h-4 w-4 text-lime" />
          <span class="font-sans text-sm font-medium text-lime">Diagn√≥stico Completo</span>
        </div>
        <h1 class="mb-4 font-display text-display-lg text-white">
          Seu <span class="text-lime">Raio-X</span> de Vendas
        </h1>
        <p class="mx-auto max-w-2xl font-sans text-body-lg text-gray-300">
          Baseado em suas respostas, identificamos exatamente onde est√£o seus gargalos e oportunidades.
        </p>
      </div>

      <!-- Aviso Importante -->
      <div class="mb-8">
        <div class="rounded-xl border-2 border-yellow-500/30 bg-yellow-500/5 p-6 backdrop-blur-sm">
          <div class="mb-3 flex items-center gap-3">
            <Target className="h-6 w-6 text-yellow-400" />
            <h3 class="font-display text-h4 text-white">‚ö†Ô∏è Importante: Hierarquia dos 6Ps</h3>
          </div>
          <div class="grid gap-6 md:grid-cols-2">
            <div>
              <div class="mb-2 inline-flex items-center gap-2 rounded-full bg-lime/20 px-3 py-1">
                <span class="font-sans text-xs font-bold text-lime">üéØ ESTRAT√âGICOS (Peso Maior)</span>
              </div>
              <p class="mb-2 font-sans text-sm font-semibold text-white">1Ô∏è‚É£ Posicionamento ‚Üí 2Ô∏è‚É£ P√∫blico ‚Üí 3Ô∏è‚É£ Produto</p>
              <p class="font-sans text-sm text-gray-300">Definem QUEM voc√™ √©, para QUEM vende e O QU√ä oferece. Se estiverem fracos, nada mais funciona.</p>
            </div>
            <div>
              <div class="mb-2 inline-flex items-center gap-2 rounded-full bg-blue-500/20 px-3 py-1">
                <span class="font-sans text-xs font-bold text-blue-400">‚öôÔ∏è T√ÅTICOS/OPERACIONAIS</span>
              </div>
              <p class="mb-2 font-sans text-sm font-semibold text-white">4Ô∏è‚É£ Programas ‚Üí 5Ô∏è‚É£ Processos ‚Üí 6Ô∏è‚É£ Pessoas</p>
              <p class="font-sans text-sm text-gray-300">Definem COMO voc√™ vende, opera e executa. S√≥ fazem sentido se os estrat√©gicos estiverem s√≥lidos.</p>
            </div>
          </div>
          <div class="mt-4 rounded-lg bg-dark/50 p-4">
            <p class="font-sans text-sm text-gray-300">
              <strong class="text-yellow-400">‚ö†Ô∏è Regra de Ouro:</strong> N√£o adianta ter processos perfeitos se seu posicionamento √© fraco. <strong class="text-white">Sempre priorize os Ps estrat√©gicos primeiro.</strong>
            </p>
          </div>
        </div>
      </div>

      <!-- Score Geral -->
      <div class="mb-12">
        <div class="rounded-2xl border border-lime/30 bg-lime/5 p-8 backdrop-blur-sm">
          <div class="grid gap-8 md:grid-cols-2">
            <div class="flex flex-col justify-center">
              <h2 class="mb-2 font-display text-h2 text-white">Pontua√ß√£o Geral</h2>
              <div class="mb-4">
                <span id="score-total" class="font-display text-6xl text-lime">--</span>
                <span class="font-display text-3xl text-gray-400">/24</span>
              </div>
              <p id="maturity-level" class="mb-4 font-sans text-body-lg text-gray-300">
                N√≠vel: <strong class="text-lime">Calculando...</strong>
              </p>
              <p id="maturity-description" class="font-sans text-body text-gray-400"></p>
            </div>
            
            <!-- Radar Chart Container -->
            <div class="flex items-center justify-center">
              <div class="relative h-80 w-80">
                <canvas id="radarChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- An√°lise por P -->
      <div class="mb-12">
        <h2 class="mb-6 font-display text-h2 text-white">An√°lise Detalhada dos 6Ps</h2>
        <div id="ps-analysis" class="space-y-4">
          <!-- Preenchido via JavaScript -->
        </div>
      </div>

      <!-- Prioridades -->
      <div class="mb-12">
        <div class="rounded-2xl border border-red-500/30 bg-red-500/5 p-8 backdrop-blur-sm">
          <div class="mb-6 flex items-center gap-3">
            <AlertTriangle className="h-8 w-8 text-red-400" />
            <h2 class="font-display text-h2 text-white">Suas Prioridades Imediatas</h2>
          </div>
          <div id="priorities" class="space-y-4">
            <!-- Preenchido via JavaScript -->
          </div>
        </div>
      </div>

      <!-- Plano de A√ß√£o -->
      <div class="mb-12">
        <div class="rounded-2xl border border-white/10 bg-white/5 p-8 backdrop-blur-sm">
          <div class="mb-6 flex items-center gap-3">
            <Target className="h-8 w-8 text-lime" />
            <h2 class="font-display text-h2 text-white">Pr√≥ximos Passos</h2>
          </div>
          <div id="action-plan" class="space-y-6">
            <!-- Preenchido via JavaScript -->
          </div>
        </div>
      </div>

      <!-- CTAs -->
      <div class="grid gap-6 lg:grid-cols-3">
        <div class="lg:col-span-2 rounded-xl border-2 border-lime bg-gradient-to-br from-lime/10 to-lime/5 p-8 backdrop-blur-sm">
          <div class="mb-4 inline-flex items-center gap-2 rounded-full bg-lime px-3 py-1">
            <span class="font-sans text-xs font-bold text-dark">üî• RECOMENDADO</span>
          </div>
          <h3 class="mb-3 font-display text-h3 text-white">Vendas Sem Segredos</h3>
          <p class="mb-6 font-sans text-body-lg text-gray-300">
            <strong class="text-white">Transforme este diagn√≥stico em resultados reais.</strong> Aprenda o framework completo dos 6Ps e implemente na sua empresa com a forma√ß√£o que j√° ajudou 140+ neg√≥cios a escalarem suas vendas.
          </p>
          <div class="mb-6 grid gap-3 sm:grid-cols-2">
            <div class="flex items-start gap-2">
              <CheckCircle2 className="h-5 w-5 mt-0.5 text-lime flex-shrink-0" />
              <span class="font-sans text-sm text-gray-300">Framework completo dos 6Ps</span>
            </div>
            <div class="flex items-start gap-2">
              <CheckCircle2 className="h-5 w-5 mt-0.5 text-lime flex-shrink-0" />
              <span class="font-sans text-sm text-gray-300">Implementa√ß√£o passo a passo</span>
            </div>
            <div class="flex items-start gap-2">
              <CheckCircle2 className="h-5 w-5 mt-0.5 text-lime flex-shrink-0" />
              <span class="font-sans text-sm text-gray-300">Templates e ferramentas</span>
            </div>
            <div class="flex items-start gap-2">
              <CheckCircle2 className="h-5 w-5 mt-0.5 text-lime flex-shrink-0" />
              <span class="font-sans text-sm text-gray-300">Suporte e comunidade</span>
            </div>
          </div>
          <a
            href="/vendas-sem-segredos"
            class="inline-flex items-center gap-2 rounded-lg bg-lime px-8 py-4 font-sans text-lg font-bold text-dark transition-all hover:bg-lime/90 hover:scale-105 shadow-lg shadow-lime/20"
          >
            Conhecer Vendas Sem Segredos
            <ArrowRight className="h-5 w-5" />
          </a>
        </div>

        <div class="rounded-xl border border-white/10 bg-white/5 p-6 backdrop-blur-sm">
          <h3 class="mb-3 font-display text-h4 text-white">üíº Quer Implementa√ß√£o?</h3>
          <p class="mb-4 font-sans text-body text-gray-300">
            Prefere que fa√ßamos por voc√™? Conhe√ßa nossos servi√ßos de implementa√ß√£o e consultoria.
          </p>
          <a
            href="/services"
            class="inline-flex items-center gap-2 rounded-lg border border-white/20 px-6 py-3 font-sans font-semibold text-white transition-all hover:border-lime hover:text-lime"
          >
            Ver Servi√ßos
            <ArrowRight className="h-4 w-4" />
          </a>
        </div>
      </div>
    </div>
  </div>

  <Footer />
</Layout>

<script is:inline src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<script define:vars={{}}>
  // Dados dos 6Ps
  const psData = {
    posicionamento: {
      name: 'Posicionamento',
      icon: 'üéØ',
      description: 'Como sua empresa se diferencia no mercado',
      levels: {
        0: { name: 'Ca√≥tico', description: 'Compete 100% por pre√ßo, sem diferencial claro', actions: ['Defina sua promessa √∫nica de valor', 'Mapeie seus diferenciais tang√≠veis', 'Crie seu elevator pitch'] },
        1: { name: 'Iniciante', description: 'Tenta se diferenciar mas n√£o fica claro', actions: ['Esclare√ßa sua comunica√ß√£o', 'Teste diferentes mensagens', 'Colete feedback dos clientes'] },
        2: { name: 'B√°sico', description: 'Tem diferencial mas n√£o defende bem', actions: ['Fortale√ßa sua narrativa', 'Documente casos de sucesso', 'Treine equipe no posicionamento'] },
        3: { name: 'Intermedi√°rio', description: 'Diferencial claro internamente', actions: ['Amplifique na comunica√ß√£o', 'Construa autoridade no nicho', 'Crie conte√∫do consistente'] },
        4: { name: 'Avan√ßado', description: 'Mercado reconhece seu diferencial', actions: ['Expanda para novos segmentos', 'Desenvolva sub-marcas', 'Licencie seu m√©todo'] }
      }
    },
    publico: {
      name: 'P√∫blico',
      icon: 'üë•',
      description: 'Clareza sobre seu cliente ideal',
      levels: {
        0: { name: 'Ca√≥tico', description: 'Vende para qualquer um', actions: ['Defina seu ICP (Ideal Customer Profile)', 'Liste caracter√≠sticas demogr√°ficas', 'Identifique padr√µes nos melhores clientes'] },
        1: { name: 'Iniciante', description: 'P√∫blico amplo demais', actions: ['Segmente por setor ou porte', 'Qualifique leads antes de vender', 'Rejeite clientes fora do perfil'] },
        2: { name: 'B√°sico', description: 'Segmenta√ß√£o superficial', actions: ['Aprofunde nas dores espec√≠ficas', 'Mapeie jornada de compra', 'Crie buyer personas'] },
        3: { name: 'Intermedi√°rio', description: 'ICP bem definido', actions: ['Desenvolva m√∫ltiplas personas', 'Personalize comunica√ß√£o por segmento', 'Antecipe obje√ß√µes por perfil'] },
        4: { name: 'Avan√ßado', description: 'Conhecimento profundo do cliente', actions: ['Crie micro-segmentos', 'Desenvolva produtos espec√≠ficos', 'Preveja comportamentos'] }
      }
    },
    produto: {
      name: 'Produto',
      icon: 'üì¶',
      description: 'Sua oferta estruturada e com valor claro',
      levels: {
        0: { name: 'Ca√≥tico', description: 'Proposta de valor confusa', actions: ['Estruture sua oferta', 'Defina benef√≠cios tang√≠veis', 'Estabele√ßa precifica√ß√£o baseada em valor'] },
        1: { name: 'Iniciante', description: 'Funciona mas mal apresentado', actions: ['Melhore a "embalagem"', 'Adicione prova social', 'Crie garantias'] },
        2: { name: 'B√°sico', description: 'Valor definido mas mal comunicado', actions: ['Refine proposta de valor', 'Documente resultados', 'Crie comparativos'] },
        3: { name: 'Intermedi√°rio', description: 'Produto bem posicionado', actions: ['Desenvolva vers√µes escal√°veis', 'Crie linhas de produto', 'Implemente upsells'] },
        4: { name: 'Avan√ßado', description: 'Produto diferenciado e valorizado', actions: ['Inovar constantemente', 'Criar ecossistema', 'Desenvolver IP pr√≥prio'] }
      }
    },
    programas: {
      name: 'Programas',
      icon: 'üí∞',
      description: 'Como voc√™ vende e entrega',
      levels: {
        0: { name: 'Ca√≥tico', description: 'Vendas aleat√≥rias', actions: ['Mapeie seu funil atual', 'Defina etapas de venda', 'Crie sequ√™ncia de follow-up'] },
        1: { name: 'Iniciante', description: 'Processo existe mas informal', actions: ['Documente funil de vendas', 'Implemente CRM b√°sico', 'Crie templates de proposta'] },
        2: { name: 'B√°sico', description: 'Funil estruturado', actions: ['Automatize follow-ups', 'Crie nutri√ß√£o de leads', 'Desenvolva m√∫ltiplos funis'] },
        3: { name: 'Intermedi√°rio', description: 'Funis funcionando bem', actions: ['Otimize convers√£o', 'Teste novos canais', 'Implemente cross-sell'] },
        4: { name: 'Avan√ßado', description: 'Machine de vendas previs√≠vel', actions: ['Escale aquisi√ß√£o', 'Desenvolva parcerias', 'Crie modelo recorrente'] }
      }
    },
    processos: {
      name: 'Processos',
      icon: '‚öôÔ∏è',
      description: 'Opera√ß√£o documentada e replic√°vel',
      levels: {
        0: { name: 'Ca√≥tico', description: 'Nada documentado', actions: ['Liste processos cr√≠ticos', 'Documente passo a passo', 'Crie checklists'] },
        1: { name: 'Iniciante', description: 'Alguns processos informais', actions: ['Padronize tarefas repetitivas', 'Crie SOPs b√°sicos', 'Implemente ferramenta de gest√£o'] },
        2: { name: 'B√°sico', description: 'Processos principais documentados', actions: ['Refine e otimize', 'Treine equipe nos processos', 'Me√ßa indicadores'] },
        3: { name: 'Intermedi√°rio', description: 'Opera√ß√£o padronizada', actions: ['Automatize tarefas', 'Crie dashboard de m√©tricas', 'Implemente melhoria cont√≠nua'] },
        4: { name: 'Avan√ßado', description: 'Processos otimizados', actions: ['Certifica√ß√£o de qualidade', 'Benchmarking', 'Inova√ß√£o de processos'] }
      }
    },
    pessoas: {
      name: 'Pessoas',
      icon: 'ü§ù',
      description: 'Time capacitado e alinhado',
      levels: {
        0: { name: 'Ca√≥tico', description: 'Tudo depende do fundador', actions: ['Mapeie fun√ß√µes cr√≠ticas', 'Contrate primeiro vendedor', 'Defina pap√©is e responsabilidades'] },
        1: { name: 'Iniciante', description: 'Time pequeno sem clareza', actions: ['Crie descri√ß√£o de cargos', 'Estabele√ßa metas individuais', 'Inicie treinamentos'] },
        2: { name: 'B√°sico', description: 'Pap√©is definidos', actions: ['Desenvolva programa de onboarding', 'Crie trilha de desenvolvimento', 'Implemente avalia√ß√µes'] },
        3: { name: 'Intermedi√°rio', description: 'Time estruturado', actions: ['Desenvolva lideran√ßas', 'Crie plano de carreira', 'Implemente meritocracia'] },
        4: { name: 'Avan√ßado', description: 'Time de alta performance', actions: ['Desenvolva cultura forte', 'Crie programa de sucess√£o', 'Expanda lideran√ßa'] }
      }
    }
  };

  // Pegar dados da URL
  function getScoresFromURL() {
    const urlParams = new URLSearchParams(window.location.search);
    const scores = {
      posicionamento: parseInt(urlParams.get('posicionamento') || '0'),
      publico: parseInt(urlParams.get('publico') || '0'),
      produto: parseInt(urlParams.get('produto') || '0'),
      programas: parseInt(urlParams.get('programas') || '0'),
      processos: parseInt(urlParams.get('processos') || '0'),
      pessoas: parseInt(urlParams.get('pessoas') || '0')
    };
    
    return scores;
  }

  // Calcular n√≠vel de maturidade
  function getMaturityLevel(total) {
    if (total <= 4) return { name: 'Ca√≥tico', color: 'text-red-500', description: 'Sua opera√ß√£o de vendas precisa de estrutura√ß√£o urgente. Foco em construir as bases.' };
    if (total <= 8) return { name: 'Iniciante', color: 'text-orange-500', description: 'Voc√™ tem alguns elementos, mas falta consist√™ncia. Priorize os Ps mais fracos.' };
    if (total <= 12) return { name: 'Em Desenvolvimento', color: 'text-yellow-500', description: 'Boa base, mas ainda h√° gaps importantes. Hora de profissionalizar.' };
    if (total <= 16) return { name: 'Estruturado', color: 'text-lime', description: 'Opera√ß√£o s√≥lida! Foque em otimiza√ß√£o e escala dos pontos fortes.' };
    if (total <= 20) return { name: 'Avan√ßado', color: 'text-green-500', description: 'Excelente! Voc√™ tem uma m√°quina de vendas funcionando. Hora de inovar.' };
    return { name: 'Otimizado', color: 'text-emerald-400', description: 'Parab√©ns! Voc√™ est√° no top 5%. Foco em manter e expandir.' };
  }

  // Criar Radar Chart
  function createRadarChart(scores) {
    const ctx = document.getElementById('radarChart');
    if (!ctx) return;

    new Chart(ctx, {
      type: 'radar',
      data: {
        labels: ['Posicionamento', 'P√∫blico', 'Produto', 'Programas', 'Processos', 'Pessoas'],
        datasets: [{
          label: 'Sua Pontua√ß√£o',
          data: [
            scores.posicionamento,
            scores.publico,
            scores.produto,
            scores.programas,
            scores.processos,
            scores.pessoas
          ],
          fill: true,
          backgroundColor: 'rgba(190, 242, 100, 0.2)',
          borderColor: 'rgb(190, 242, 100)',
          pointBackgroundColor: 'rgb(190, 242, 100)',
          pointBorderColor: '#fff',
          pointHoverBackgroundColor: '#fff',
          pointHoverBorderColor: 'rgb(190, 242, 100)',
          borderWidth: 3,
          pointRadius: 6,
          pointHoverRadius: 8
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: true,
        scales: {
          r: {
            beginAtZero: true,
            max: 4,
            ticks: {
              stepSize: 1,
              color: '#9ca3af',
              backdropColor: 'transparent',
              font: {
                size: 12
              }
            },
            grid: {
              color: 'rgba(255, 255, 255, 0.1)'
            },
            pointLabels: {
              color: '#ffffff',
              font: {
                size: 14,
                weight: '600'
              }
            }
          }
        },
        plugins: {
          legend: {
            display: false
          },
          tooltip: {
            backgroundColor: 'rgba(10, 10, 10, 0.95)',
            titleColor: '#ffffff',
            bodyColor: '#d1d5db',
            borderColor: 'rgb(190, 242, 100)',
            borderWidth: 1,
            padding: 12,
            displayColors: false,
            callbacks: {
              label: function(context) {
                return `N√≠vel: ${context.parsed.r}/4`;
              }
            }
          }
        }
      }
    });
  }

  // Renderizar an√°lise dos Ps
  function renderPsAnalysis(scores) {
    const container = document.getElementById('ps-analysis');
    if (!container) return;

    // Definir quais s√£o estrat√©gicos
    const strategicPs = ['posicionamento', 'publico', 'produto'];

    Object.entries(scores).forEach(([key, score]) => {
      const pData = psData[key];
      const levelData = pData.levels[score];
      const isStrategic = strategicPs.includes(key);
      
      const card = document.createElement('div');
      // Borda diferente para Ps estrat√©gicos
      const borderClass = isStrategic ? 'border-lime/30' : 'border-blue-500/20';
      card.className = `rounded-xl border ${borderClass} bg-white/5 p-6 backdrop-blur-sm transition-all hover:border-lime/50`;
      
      // Determinar cor baseado na pontua√ß√£o
      let scoreColor = 'text-red-400';
      if (score >= 3) scoreColor = 'text-lime';
      else if (score >= 2) scoreColor = 'text-yellow-400';
      else if (score >= 1) scoreColor = 'text-orange-400';
      
      // Badge estrat√©gico ou t√°tico
      const badge = isStrategic 
        ? '<span class="inline-flex items-center gap-1 rounded-full bg-lime/20 px-2 py-0.5 text-xs font-bold text-lime">üéØ ESTRAT√âGICO</span>'
        : '<span class="inline-flex items-center gap-1 rounded-full bg-blue-500/20 px-2 py-0.5 text-xs font-bold text-blue-400">‚öôÔ∏è T√ÅTICO</span>';

      card.innerHTML = `
        <div class="mb-4 flex items-start justify-between">
          <div class="flex-1">
            <div class="mb-2 flex items-center gap-2">
              <span class="text-3xl">${pData.icon}</span>
              <div class="flex-1">
                <div class="flex items-center gap-2">
                  <h3 class="font-display text-h4 text-white">${pData.name}</h3>
                  ${badge}
                </div>
                <p class="font-sans text-sm text-gray-400">${pData.description}</p>
              </div>
            </div>
          </div>
          <div class="text-right">
            <div class="${scoreColor} font-display text-2xl">${score}/4</div>
            <div class="font-sans text-xs text-gray-500">${levelData.name}</div>
          </div>
        </div>
        <div class="mb-4 rounded-lg bg-dark/50 p-4">
          <p class="font-sans text-body text-gray-300">${levelData.description}</p>
        </div>
        <div>
          <p class="mb-2 font-sans text-sm font-semibold text-gray-400">Pr√≥ximas a√ß√µes:</p>
          <ul class="space-y-2">
            ${levelData.actions.map(action => `
              <li class="flex items-start gap-2 font-sans text-sm text-gray-300">
                <svg class="mt-1 h-4 w-4 flex-shrink-0 text-lime" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
                <span>${action}</span>
              </li>
            `).join('')}
          </ul>
        </div>
      `;
      
      container.appendChild(card);
    });
  }

  // Renderizar prioridades
  function renderPriorities(scores) {
    const container = document.getElementById('priorities');
    if (!container) return;

    // Ordenar Ps por pontua√ß√£o (menor primeiro)
    const sorted = Object.entries(scores)
      .sort((a, b) => a[1] - b[1])
      .slice(0, 3); // Top 3 prioridades

    // Identificar se prioridade √© estrat√©gica
    const strategicPs = ['posicionamento', 'publico', 'produto'];
    const hasStrategicIssue = sorted.some(([key]) => strategicPs.includes(key));

    container.innerHTML = `
      <p class="mb-4 font-sans text-body text-gray-300">
        ${hasStrategicIssue 
          ? '<strong class="text-yellow-400">‚ö†Ô∏è CR√çTICO:</strong> Voc√™ tem gaps nos Ps <strong class="text-white">estrat√©gicos</strong>. Priorize-os <strong class="text-white">antes</strong> de trabalhar nos t√°ticos/operacionais.'
          : 'Baseado no framework dos 6Ps, recomendamos focar nesta ordem:'}
      </p>
      ${sorted.map(([key, score], index) => {
        const pData = psData[key];
        const isStrategic = strategicPs.includes(key);
        const urgencyBorder = isStrategic ? 'border-red-500/50' : 'border-orange-500/30';
        const urgencyBg = isStrategic ? 'bg-red-500/10' : 'bg-orange-500/5';
        const urgencyBadge = isStrategic ? 'bg-red-500' : 'bg-orange-500';
        return `
          <div class="flex items-start gap-4 rounded-lg border ${urgencyBorder} ${urgencyBg} p-4">
            <div class="flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full ${urgencyBadge} font-display text-lg font-bold text-white">
              ${index + 1}
            </div>
            <div class="flex-1">
              <h4 class="mb-1 font-display text-h5 text-white">${pData.icon} ${pData.name}</h4>
              <p class="mb-2 font-sans text-sm text-gray-400">Pontua√ß√£o atual: ${score}/4 - ${pData.levels[score].name}</p>
              <p class="font-sans text-body text-gray-300">${pData.levels[score].description}</p>
            </div>
          </div>
        `;
      }).join('')}
    `;
  }

  // Renderizar plano de a√ß√£o
  function renderActionPlan(scores) {
    const container = document.getElementById('action-plan');
    if (!container) return;

    const weakest = Object.entries(scores).sort((a, b) => a[1] - b[1])[0];
    const pData = psData[weakest[0]];
    const currentLevel = pData.levels[weakest[1]];
    const nextLevel = weakest[1] < 4 ? pData.levels[weakest[1] + 1] : null;

    container.innerHTML = `
      <div class="rounded-lg border border-lime/30 bg-lime/5 p-6">
        <h3 class="mb-3 font-display text-h4 text-white">üéØ Foco Principal: ${pData.name}</h3>
        <p class="mb-4 font-sans text-body text-gray-300">
          Este √© seu gargalo cr√≠tico. Ao melhorar ${pData.name.toLowerCase()}, voc√™ destrar√° crescimento em toda opera√ß√£o.
        </p>
        ${nextLevel ? `
          <div class="mb-4 rounded-lg bg-dark/50 p-4">
            <p class="mb-2 font-sans text-sm font-semibold text-gray-400">Meta: Chegar ao n√≠vel "${nextLevel.name}"</p>
            <p class="font-sans text-sm text-gray-300">${nextLevel.description}</p>
          </div>
        ` : ''}
        <div>
          <p class="mb-3 font-sans text-sm font-semibold text-white">Checklist de 30 dias:</p>
          ${currentLevel.actions.map((action, idx) => `
            <label class="mb-2 flex items-start gap-3 cursor-pointer group">
              <input type="checkbox" class="mt-1 h-5 w-5 rounded border-white/20 bg-white/10 text-lime focus:ring-2 focus:ring-lime/20">
              <span class="font-sans text-body text-gray-300 group-hover:text-white transition-colors">${action}</span>
            </label>
          `).join('')}
        </div>
      </div>
      <div class="rounded-lg border border-white/10 bg-white/5 p-6">
        <h4 class="mb-3 font-sans text-lg font-semibold text-white">üí° Dica do Joel:</h4>
        <p class="font-sans text-body text-gray-300">
          N√£o tente melhorar todos os Ps ao mesmo tempo. Foque em ${pData.name.toLowerCase()} pelos pr√≥ximos 30-60 dias.
          <strong class="text-white">Um P bem resolvido tem mais impacto que seis Ps mal executados.</strong>
        </p>
      </div>
    `;
  }

  // Inicializar p√°gina
  function init() {
    // Verificar se Chart.js est√° dispon√≠vel
    if (typeof Chart === 'undefined') {
      console.log('Aguardando Chart.js...');
      setTimeout(init, 100);
      return;
    }

    const scores = getScoresFromURL();
    const total = Object.values(scores).reduce((sum, score) => sum + score, 0);
    const maturity = getMaturityLevel(total);

    // Atualizar score total
    const scoreTotal = document.getElementById('score-total');
    if (scoreTotal) scoreTotal.textContent = total;

    // Atualizar n√≠vel de maturidade
    const maturityLevel = document.getElementById('maturity-level');
    if (maturityLevel) {
      maturityLevel.innerHTML = `N√≠vel: <strong class="${maturity.color}">${maturity.name}</strong>`;
    }

    const maturityDescription = document.getElementById('maturity-description');
    if (maturityDescription) {
      maturityDescription.textContent = maturity.description;
    }

    // Criar radar chart
    createRadarChart(scores);

    // Renderizar an√°lises
    renderPsAnalysis(scores);
    renderPriorities(scores);
    renderActionPlan(scores);
  }

  // Executar ao carregar a p√°gina
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
</script>
