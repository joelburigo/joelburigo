---
import Layout from '../layouts/Layout.astro'

// Slide 0: Apresentação Joel Burigo
import ApresentacaoJoelSlide from '../components/presentation/slides/ApresentacaoJoelSlide.astro'

// Bloco 1: Base Universal (Slides 1-9)
import ProblemaSlide from '../components/presentation/slides/ProblemaSlide.astro'
import RaizSlide from '../components/presentation/slides/RaizSlide.astro'
import SolucaoSlide from '../components/presentation/slides/SolucaoSlide.astro'
import Solucao6PsFundacaoSlide from '../components/presentation/slides/Solucao6PsFundacaoSlide.astro'
import Solucao6PsOperacaoEscalaSlide from '../components/presentation/slides/Solucao6PsOperacaoEscalaSlide.astro'
import CredibilidadeSlide from '../components/presentation/slides/CredibilidadeSlide.astro'
import ProvaSlide from '../components/presentation/slides/ProvaSlide.astro'
import DescobertaSlide from '../components/presentation/slides/DescobertaSlide.astro'
import TransicaoSlide from '../components/presentation/slides/TransicaoSlide.astro'

// Módulo VSS (Slides 10-13 - 4 slides)
import VSSOverviewSlide from '../components/presentation/slides/vss/VSSOverviewSlide.astro'
import VSSConteudoSlide from '../components/presentation/slides/vss/VSSConteudoSlide.astro'
import VSSTransformacaoSlide from '../components/presentation/slides/vss/VSSTransformacaoSlide.astro'
import VSSInvestimentoSlide from '../components/presentation/slides/vss/VSSInvestimentoSlide.astro'

// Módulo Services (Slides 14-17 - 4 slides)
import ServicesOverviewSlide from '../components/presentation/slides/services/ServicesOverviewSlide.astro'
import ServicesProcessoSlide from '../components/presentation/slides/services/ServicesProcessoSlide.astro'
import ServicesEntregaveisSlide from '../components/presentation/slides/services/ServicesEntregaveisSlide.astro'
import ServicesInvestimentoSlide from '../components/presentation/slides/services/ServicesInvestimentoSlide.astro'

// Módulo Advisory (Slides 18-21 - 4 slides)
import AdvisoryOverviewSlide from '../components/presentation/slides/advisory/AdvisoryOverviewSlide.astro'
import AdvisoryFormatoSlide from '../components/presentation/slides/advisory/AdvisoryFormatoSlide.astro'
import AdvisoryValorSlide from '../components/presentation/slides/advisory/AdvisoryValorSlide.astro'
import AdvisoryInvestimentoSlide from '../components/presentation/slides/advisory/AdvisoryInvestimentoSlide.astro'

// Slide 22: CTA
import CTASlide from '../components/presentation/slides/CTASlide.astro'

const seo = {
  title: 'Apresentação Comercial | Joel Burigo',
  description: 'Apresentação comercial modular dos produtos e serviços Joel Burigo.',
  noIndex: true,
}
---

<Layout title={seo.title} description={seo.description} noIndex={seo.noIndex}>
  <div 
    x-data="{ 
      currentSlide: 0, 
      totalSlides: 23,
      next() { 
        // Bloqueia no slide de Transição (9) - deve clicar em um botão para escolher
        if (this.currentSlide === 9) {
          return // Não avança
        }
        // Se está no final do módulo VSS (slide 13), pula para CTA (22)
        else if (this.currentSlide === 13) {
          this.currentSlide = 22
        }
        // Se está no final do módulo Services (slide 17), pula para CTA (22)
        else if (this.currentSlide === 17) {
          this.currentSlide = 22
        }
        // Se está no final do módulo Advisory (slide 21), pula para CTA (22)
        else if (this.currentSlide === 21) {
          this.currentSlide = 22
        }
        // Navegação normal
        else if (this.currentSlide < this.totalSlides - 1) {
          this.currentSlide++
        }
      },
      prev() { 
        // Se está no CTA (22) e veio de um módulo, volta para o início do módulo
        if (this.currentSlide === 22) {
          // Volta para slide de Transição (9) para escolher novamente
          this.currentSlide = 9
        }
        else if (this.currentSlide > 0) {
          this.currentSlide--
        }
      },
      goTo(slide) {
        this.currentSlide = slide
      }
    }" 
    @keydown.window.right="next()" 
    @keydown.window.left="prev()"
    class="fixed inset-0 z-50 flex h-screen w-screen flex-col bg-dark text-white"
  >
    <!-- Progress Bar -->
    <div class="fixed top-0 left-0 h-1 bg-lime transition-all duration-300 z-[100]" :style="`width: ${(currentSlide / (totalSlides - 1)) * 100}%`"></div>

    <!-- Navigation Controls (Hidden but accessible) -->
    <div class="absolute bottom-8 right-8 z-50 flex gap-4 opacity-0 hover:opacity-100 transition-opacity">
      <button @click="prev()" class="rounded-full bg-white/10 p-3 hover:bg-white/20 backdrop-blur-sm">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
      </button>
      <button @click="next()" class="rounded-full bg-white/10 p-3 hover:bg-white/20 backdrop-blur-sm">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
      </button>
    </div>

    <!-- Slides Container -->
    <div class="flex-grow overflow-hidden relative">
      
      <!-- SLIDE 0: APRESENTAÇÃO JOEL BURIGO -->
      
      <!-- Slide 0: Apresentação Joel -->
      <div x-show="currentSlide === 0" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <ApresentacaoJoelSlide />
      </div>
      
      <!-- BLOCO 1: BASE UNIVERSAL (1-9) -->
      
      <!-- Slide 1: Problema -->
      <div x-show="currentSlide === 1" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <ProblemaSlide />
      </div>

      <!-- Slide 2: Raiz -->
      <div x-show="currentSlide === 2" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <RaizSlide />
      </div>

      <!-- Slide 3: Solução 6Ps Overview -->
      <div x-show="currentSlide === 3" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <SolucaoSlide />
      </div>

      <!-- Slide 4: 6Ps Fundação (P1-P3) -->
      <div x-show="currentSlide === 4" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <Solucao6PsFundacaoSlide />
      </div>

      <!-- Slide 5: 6Ps Operação/Escala (P4-P6) -->
      <div x-show="currentSlide === 5" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <Solucao6PsOperacaoEscalaSlide />
      </div>

      <!-- Slide 6: Credibilidade -->
      <div x-show="currentSlide === 6" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <CredibilidadeSlide />
      </div>

      <!-- Slide 7: Prova -->
      <div x-show="currentSlide === 7" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <ProvaSlide />
      </div>

      <!-- Slide 8: Descoberta -->
      <div x-show="currentSlide === 8" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <DescobertaSlide />
      </div>

      <!-- Slide 9: Transição -->
      <div x-show="currentSlide === 9" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <TransicaoSlide />
      </div>

      <!-- MÓDULO VSS (10-13) -->
      
      <!-- Slide 10: VSS Overview -->
      <div x-show="currentSlide === 10" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <VSSOverviewSlide />
      </div>

      <!-- Slide 11: VSS Conteúdo -->
      <div x-show="currentSlide === 11" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <VSSConteudoSlide />
      </div>

      <!-- Slide 12: VSS Transformação -->
      <div x-show="currentSlide === 12" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <VSSTransformacaoSlide />
      </div>

      <!-- Slide 13: VSS Investimento -->
      <div x-show="currentSlide === 13" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <VSSInvestimentoSlide />
      </div>

      <!-- MÓDULO SERVICES (14-17) -->
      
      <!-- Slide 14: Services Overview -->
      <div x-show="currentSlide === 14" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <ServicesOverviewSlide />
      </div>

      <!-- Slide 15: Services Processo -->
      <div x-show="currentSlide === 15" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <ServicesProcessoSlide />
      </div>

      <!-- Slide 16: Services Entregáveis -->
      <div x-show="currentSlide === 16" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <ServicesEntregaveisSlide />
      </div>

      <!-- Slide 17: Services Investimento -->
      <div x-show="currentSlide === 17" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <ServicesInvestimentoSlide />
      </div>

      <!-- MÓDULO ADVISORY (18-21) -->
      
      <!-- Slide 18: Advisory Overview -->
      <div x-show="currentSlide === 18" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <AdvisoryOverviewSlide />
      </div>

      <!-- Slide 19: Advisory Formato -->
      <div x-show="currentSlide === 19" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <AdvisoryFormatoSlide />
      </div>

      <!-- Slide 20: Advisory Valor -->
      <div x-show="currentSlide === 20" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <AdvisoryValorSlide />
      </div>

      <!-- Slide 21: Advisory Investimento -->
      <div x-show="currentSlide === 21" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <AdvisoryInvestimentoSlide />
      </div>

      <!-- SLIDE 22: CTA FECHAMENTO -->
      
      <!-- Slide 22: CTA -->
      <div x-show="currentSlide === 22" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-10" x-transition:enter-end="opacity-100 transform translate-x-0" class="absolute inset-0">
        <CTASlide />
      </div>

    </div>
    
    <!-- Footer Indicator -->
    <div class="absolute bottom-4 left-0 w-full text-center text-xs text-gray-500 font-mono">
      Use as setas <span class="border border-gray-700 rounded px-1">←</span> <span class="border border-gray-700 rounded px-1">→</span> para navegar • Slide <span x-text="currentSlide + 1"></span>/<span x-text="totalSlides"></span>
    </div>
  </div>
  
  <!-- Alpine.js for interactivity -->
  <script is:inline src="//unpkg.com/alpinejs" defer></script>
</Layout>

<style>
  /* Hide scrollbar for cleaner presentation look */
  ::-webkit-scrollbar {
    width: 0px;
    background: transparent;
  }
</style>
