---
import Layout from '../layouts/Layout.astro'
import Header from '../components/layout/Header.astro'
import Footer from '../components/layout/Footer.astro'
import Container from '../components/ui/Container.astro'
import Icons from '../components/ui/Icons.astro'

const seo = {
  title: 'üìÖ Agendar Sess√£o Estrat√©gica - Advisory | Joel Burigo',
  description: 'Agende sua sess√£o estrat√©gica de 90 minutos. Diagn√≥stico dos 6Ps e plano de a√ß√£o com 3-5 a√ß√µes priorit√°rias. R$ 997.',
  keywords: 'sess√£o estrat√©gica, consultoria empresarial, advisory, Joel Burigo, agendamento',
}
---

<Layout title={seo.title} description={seo.description} keywords={seo.keywords}>
  <Header />
  
  <main class="min-h-screen bg-dark pt-16 md:pt-20">
    <section class="py-12 md:py-16">
      <Container>
        <div class="mx-auto max-w-5xl">
          <!-- Header -->
          <div class="mb-8 text-center">
            <div class="mb-4 inline-block rounded-full bg-lime/10 px-6 py-2">
              <span class="font-display text-sm font-bold text-lime">ADVISORY</span>
            </div>
            <h1 class="mb-4 font-display text-4xl font-bold text-white md:text-5xl">
              üìÖ Agendar Sess√£o Estrat√©gica
            </h1>
            <p class="mx-auto max-w-2xl font-sans text-body-lg text-gray-200">
              Escolha o melhor hor√°rio para sua sess√£o de 90 minutos
            </p>
          </div>

          <!-- Info Cards -->
          <div class="mb-8 grid grid-cols-1 gap-4 md:grid-cols-3">
            <div class="rounded-xl border border-lime/20 bg-lime/5 p-4 text-center">
              <Icons name="clock" class="mx-auto mb-2 h-6 w-6 text-lime" />
              <p class="mb-1 font-display text-sm font-semibold text-white">Dura√ß√£o</p>
              <p class="font-sans text-xs text-gray-300">90 minutos</p>
            </div>
            <div class="rounded-xl border border-lime/20 bg-lime/5 p-4 text-center">
              <Icons name="calendar" class="mx-auto mb-2 h-6 w-6 text-lime" />
              <p class="mb-1 font-display text-sm font-semibold text-white">Disponibilidade</p>
              <p class="font-sans text-xs text-gray-300">M√°x 4 sess√µes/m√™s</p>
            </div>
            <div class="rounded-xl border border-lime/20 bg-lime/5 p-4 text-center">
              <Icons name="dollar-sign" class="mx-auto mb-2 h-6 w-6 text-lime" />
              <p class="mb-1 font-display text-sm font-semibold text-white">Investimento</p>
              <p class="font-sans text-xs text-gray-300">R$ 997</p>
            </div>
          </div>

          <!-- O Que Est√° Inclu√≠do -->
          <div class="mb-8 rounded-2xl border-2 border-lime/30 bg-white/5 p-6 md:p-8">
            <h2 class="mb-4 font-display text-h2 text-white">O Que Est√° Inclu√≠do</h2>
            <ul class="grid grid-cols-1 gap-3 md:grid-cols-2">
              <li class="flex items-start gap-2">
                <Icons name="check-circle-2" class="h-5 w-5 flex-shrink-0 text-lime" />
                <span class="font-sans text-body-sm text-gray-200">90 minutos de consultoria ao vivo</span>
              </li>
              <li class="flex items-start gap-2">
                <Icons name="check-circle-2" class="h-5 w-5 flex-shrink-0 text-lime" />
                <span class="font-sans text-body-sm text-gray-200">An√°lise profunda do desafio</span>
              </li>
              <li class="flex items-start gap-2">
                <Icons name="check-circle-2" class="h-5 w-5 flex-shrink-0 text-lime" />
                <span class="font-sans text-body-sm text-gray-200">Diagn√≥stico r√°pido dos 6Ps</span>
              </li>
              <li class="flex items-start gap-2">
                <Icons name="check-circle-2" class="h-5 w-5 flex-shrink-0 text-lime" />
                <span class="font-sans text-body-sm text-gray-200">Plano de a√ß√£o (3-5 a√ß√µes priorit√°rias)</span>
              </li>
              <li class="flex items-start gap-2">
                <Icons name="check-circle-2" class="h-5 w-5 flex-shrink-0 text-lime" />
                <span class="font-sans text-body-sm text-gray-200">Grava√ß√£o da sess√£o</span>
              </li>
              <li class="flex items-start gap-2">
                <Icons name="check-circle-2" class="h-5 w-5 flex-shrink-0 text-lime" />
                <span class="font-sans text-body-sm text-gray-200">Relat√≥rio executivo em 24h (2-3 p√°ginas)</span>
              </li>
            </ul>
          </div>

          <!-- Booking Widget -->
          <div class="rounded-2xl border-2 border-lime/30 bg-gradient-to-b from-dark to-slate-800 p-4">
            <div id="booking-container" class="min-h-[600px]">
              <!-- Loading State -->
              <div id="booking-loading" class="flex min-h-[600px] items-center justify-center">
                <div class="text-center">
                  <div class="mb-4 inline-block h-12 w-12 animate-spin rounded-full border-4 border-lime/30 border-t-lime"></div>
                  <p class="font-sans text-body text-gray-300">Carregando calend√°rio...</p>
                </div>
              </div>
              
              <!-- Iframe will be injected here -->
              <div id="booking-iframe-wrapper" class="hidden"></div>
            </div>
          </div>

          <!-- Back Link -->
          <div class="mt-8 text-center">
            <a href="/advisory" class="inline-flex items-center gap-2 font-sans text-body text-gray-400 transition-colors hover:text-lime">
              ‚Üê Voltar para Advisory
            </a>
          </div>
        </div>
      </Container>
    </section>
  </main>

  <Footer />
</Layout>

<script>
  // Lazy load booking iframe
  document.addEventListener('DOMContentLoaded', () => {
    const container = document.getElementById('booking-iframe-wrapper');
    const loading = document.getElementById('booking-loading');
    
    if (!container || !loading) return;

    // Create and inject iframe
    const iframe = document.createElement('iframe');
    iframe.src = 'https://api.gsh.digital/widget/booking/IxxmHsXDAkSzsx3C6SyE';
    iframe.style.cssText = 'width: 100%; border: none; overflow: hidden; min-height: 600px;';
    iframe.scrolling = 'no';
    iframe.id = 'IxxmHsXDAkSzsx3C6SyE_' + Date.now();
    
    // Show iframe when loaded
    iframe.onload = () => {
      loading.classList.add('hidden');
      container.classList.remove('hidden');
    };

    container.appendChild(iframe);

    // Load external script
    const script = document.createElement('script');
    script.src = 'https://api.gsh.digital/js/form_embed.js';
    script.type = 'text/javascript';
    document.body.appendChild(script);
  });
</script>

<style>
  /* Smooth fade in animation */
  section {
    animation: fadeIn 0.6s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
